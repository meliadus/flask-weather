{% extends "base.html" %}
{% block content %}
<h1 class="text-center mb-4">{{ 'Cart' if lang == 'en' else 'Корзина' }}</h1>

{% if cart_items %}
<table class="table table-dark table-striped align-middle">
  <thead>
    <tr>
      <th>{{ 'Product' if lang=='en' else 'Товар' }}</th>
      <th class="text-center">{{ 'Quantity' if lang=='en' else 'Кол-во' }}</th>
      <th class="text-end">{{ 'Price' if lang=='en' else 'Цена' }}</th>
      <th class="text-end">{{ 'Subtotal' if lang=='en' else 'Сумма' }}</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {% for item in cart_items %}
    <tr>
      <td>{{ item['name_' + lang] }}</td>
      <td class="text-center">
        <form method="post" action="/update_cart/{{ item.id }}" class="d-flex justify-content-center">
          <input type="number" name="qty" value="{{ item.qty }}" min="0"
                 class="form-control form-control-sm me-2" style="width:80px;">
          <button type="submit" class="btn btn-sm btn-primary">
            {{ 'Update' if lang=='en' else 'Обновить' }}
          </button>
        </form>
      </td>
      <td class="text-end">{{ item.price }} NOK</td>
      <td class="text-end">{{ item.subtotal }} NOK</td>
      <td>
        <a href="/remove_from_cart/{{ item.id }}" class="btn btn-danger btn-sm">
          {{ 'Remove' if lang=='en' else 'Удалить' }}
        </a>
      </td>
    </tr>
    {% endfor %}
    <tr>
      <th colspan="3" class="text-end">{{ 'Total' if lang=='en' else 'Итого' }}</th>
      <th class="text-end">{{ total }} NOK</th>
      <th></th>
    </tr>
  </tbody>
</table>

<a href="/{{ 'ru/checkout' if lang=='ru' else 'checkout' }}" class="btn btn-success mt-3">
  {{ 'Checkout' if lang=='en' else 'Оформить заказ' }}
</a>
{% else %}
<p>{{ 'Your cart is empty' if lang=='en' else 'Ваша корзина пуста' }}</p>
{% endif %}
{% endblock %}
